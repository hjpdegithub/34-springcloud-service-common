<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.springboot.boot.modules.admin.mapper.MpAuthHMapper">

    <select id="selectAllMpAuths" resultType="com.springboot.boot.modules.admin.vo.auth.MpAuthHVo">
        select a.* ,
        b.name as unitName ,
        c.name as departMentName
        from mp_auth a
        left join mp_unit b
        on a.unit_id = b.id
        left join mp_department c
        on a.department_id = b.id
        inner join mp_auth_domain d
        on d.auth_direction_id = a.id

        <where>
            <if test="name != null and name != ''">
                a.name = #{name}
            </if>
            <if test="authFirstClassifyId != null and authFirstClassifyId != ''">
                a.direction_id = #{authFirstClassifyId}
            </if>
            <if test="authSencondClassifyId != null and authSencondClassifyId != ''">
                a.domain_id = #{authSencondClassifyId}
            </if>
            <if test="authLevel != null and authLevel != ''">
                a.auth_level = #{authLevel}
            </if>
            <if test="endTime != null and endTime != ''">
                and a.end_time >= #{dateStart}
                and a.end_time <![CDATA[<]]>   #{dateEnd}
            </if>

        </where>
    </select>

</mapper>